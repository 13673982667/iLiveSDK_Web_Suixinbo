<!DOCTYPE html>
<html>

<head>
    <title>WebRTC</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <link rel='stylesheet' href='./assets/css/weui.css?v=1' />
    <link rel="stylesheet" href="./assets/css/jquery-weui.min.css">
    <link rel='stylesheet' href='./assets/css/style.css?v=1' />
    <link rel='stylesheet' href='./assets/css/video-call-mobile.css?v=1' />
    <script>
        (function() {
            if (location.hostname.indexOf('sxb.qcloud.com') === -1) return;
            var param = window.location.search + window.location.hash;
            if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/android/gi)) || (navigator.userAgent.match(/Windows Phone/i))) {

            } else {
                location.replace("../pc/index.html" + param);
            }
        })();
    </script>
</head>

<body>
    <div class="container login mode" style="display:none">
        <div class="login-wrap">
            <div class="login-typing">
                <input id="username" type="text" class="mobile" placeholder="输入用户名" value="webrtc03">
                <input id="password" type="password" class="mobile" placeholder="输入用户密码" value="12345678">
            </div>
            <div class="btns-wrap">
                <p class="btn-login" onclick="App.login()">登录</p>
                <p class="btn-register" onclick="App.register()">注册</p>
            </div>
        </div>
    </div>


    <!-- login mode -->
    <div class="mode transit container" style="display:none">
        <!--<i class="icon-connecting" onclick="App.createRoom()"></i>-->
        <div class="login-typing" style="padding:40% 30%;">
            <input id="roomnum" type="text" class="mobile" style="text-align:center" placeholder="输入房间号" value="">
        </div>
        <div class="btn-create-room-wrapper" onclick="App.createRoom()">
            <a href="" class="btn btn-create-room"></a>
            <p>发起视频通话</p>
        </div>
        <a href="javascript:;" class="logout" onclick="App.logout();">返回上一步</a>
    </div>



    <!-- 內容區塊 Start -->
    <div class="container mode connect" style="display:none">
        <!-- 視訊通話區域 Start -->
        <div class="main-area">
            <div class="video-panel">
                <div class="video-wrap">

                    <video id="local-video" class="user-video video-item viewMode" data-videotype="local" autoplay="autoplay"></video>
                    <video id="remote-video" class="cs-video video-item viewMode" data-videotype="remote" autoplay="autoplay"></video>
                    <div class="room-id">
                    </div>
                    <div class="action-panel">
                        <div id="hangup" class="btn-hangup">
                            <i></i>
                        </div>
                        <div id="mute-audio" class="btn-volume off">
                            <i></i>
                        </div>
                        <div id="mute-video" class="btn-video">
                            <i></i>
                        </div>
                        <div id="reversal" class="btn-camera">
                            <i></i>
                        </div>
                        <br />
                        <br />
                        <div id="volume-lower" class="btn-volume-lower">
                            <i></i>
                        </div>
                        <div id="volume-higher" class="btn-volume-higher">
                            <i></i>
                        </div>
                    </div>
                </div>
                <div class="chat-wrap">
                    <div class="chatting-area">
                        <ul id="msg-box">
                        </ul>
                    </div>
                    <div class="typing-area">
                        <input id="msg_input" type="text" class="input-element" placeholder="输入你想要回复的内容">
                        <span onclick="IMApp.onSendMsg()">发送</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- 視訊通話區域  End  -->
    </div>


    </div>

</body>


<script id="msg-item-tpl" type="text/html ">
    {{ if msg.isSelfSend }}
    <li class="cs-msg">
        <div class="msg-wrap">
            <span class="from">我:</span>
            <span class="msg">{{ msg.content }}</span>
        </div>
    </li>
    {{ else }}
    <li class="user-msg">
        <div class="msg-wrap">
            <span class="from">客服：</span>
            <span class="msg">{{ msg.content }}</span>
        </div>
    </li>
    {{ /if }}
</script>
<script src="../libs/jquery-3.1.1.min.js"></script>
<script src="../libs/jquery-weui.min.js"></script>
<script src="../libs/artTemplate.js"></script>
<script src="../libs/adapter.js"></script>
<script src="../libs/WebRTCAPI.js"></script>
<script src="../libs/webim.js"></script>
<script src="../libs/store.min.js"></script>
<script src="./assets/js/im.js"></script>
<script src="./assets/js/index.js?v=1"></script>
<script>
    var element = document.getElementById('local-video');
    element.muted = true;
</script>

</html>